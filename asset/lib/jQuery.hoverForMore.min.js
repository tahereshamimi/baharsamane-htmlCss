// http://lukifer.github.com/HoverForMore.js 1.2.1
// opensource.org/licenses/mit-license.php
;(function(e,t){var n=!!e.fn.jquery;var r=/Firefox/.test(navigator.userAgent);var i=/Mobile/.test(navigator.userAgent);var s={speed:60,gap:20,loop:true,removeTitle:true,snapback:true,alwaysOn:false,addStyles:true,target:false,startEvent:i?"touchstart":n?"mouseenter":"mouseover",stopEvent:i?"touchend":n?"mouseleave":"mouseout"};e.fn["hoverForMore"]=function(t){var n=this;var o=document.getElementsByTagName("head")[0];var u,a,f;t=e.extend({},s,t);var l=t.target||n.selector;if(t.alwaysOn){t.loop=true;t.startEvent="startLooping"}var c=document.body.style.animationName?true:false,h="animation",p="transition",d="transform",v="",m="Webkit Moz O ms Khtml".split(" "),g="";if(c===false)for(var y=0;y<m.length;y++){if(document.body.style[m[y]+"AnimationName"]===undefined)continue;g=m[y];h=g+"Animation";p=g+"Transition";d=g+"Transform";cssPrefix="-"+g.toLowerCase()+"-";c=true;break}if(t.addStyles){o.appendChild(e('<style type="text/css">'+n.selector+"{"+"cursor:default;"+"text-align:left;"+"display:block;"+"overflow:hidden;"+"white-space:nowrap;"+"text-overflow:ellipsis;"+cssPrefix+"user-select: none;"+"}</style>")[0])}if(!c){e(t.target||n.selector).each(function(t,n){var r=e(n);r.attr("title",e.trim(r.text()))});return n}if(t.loop){var b=e('<style type="text/css"></style>');var w=e('<style type="text/css"></style>');o.appendChild(b[0]);o.appendChild(w[0])}else{e(n.selector).each(function(e,t){t.style[d]="translateX(0px)"})}e(l).live(t.startEvent,function(s){f=(new Date).getTime();var o=e(t.target?n.selector:this).filter(":first");if(!o.length)return true;var l=o.parent();var c=o[0].scrollWidth-o.width();if(c<=0)return true;if(t.removeTitle)o.removeAttr("title");a=a||l.css("overflow");u=u||o.css("overflow");l.css("overflow","hidden");if(i&&t.addStyles)e("body").css(cssPrefix+"user-select","none");o.css("overflow","visible").addClass("scrolling");if(t.loop){o.children(".hoverForMoreContent").remove();var v=e('<span class="hoverForMoreContent" />').css({paddingLeft:parseInt(t.gap)+"px"}).text(o.text());o.append(v);var m=v.width()+parseInt(t.gap);var g="@"+cssPrefix+"keyframes hoverForMoreSlide { "+"from {"+cssPrefix+"transform:translateX( 0 ) }"+"to {"+cssPrefix+"transform:translateX( -"+m+"px ) }"+"}";b[0].innerHTML=g;var y=m/parseFloat(t.speed);o[0].style[h]="hoverForMoreSlide "+y+"s linear infinite"}else{var y=c/parseFloat(t.speed);o[0].style[p]=cssPrefix+"transform "+y+"s linear";if(!r)o[0].style[d]="translateX(-"+c+"px)";else setTimeout(function(){o[0].style[d]="translateX(-"+c+"px)"},0)}});if(!t.alwaysOn)e(l).live(t.stopEvent,function(s){var o=e(t.target?n.selector:this).filter(":first");if(!o.length)return true;if(t.loop){if(t.snapback){var l=o.children(".hoverForMoreContent").width()+parseInt(t.gap);var c=((new Date).getTime()-f)*.001;var v=c*t.speed%l;var m=v>l/2;var g="@"+cssPrefix+"keyframes hoverForMoreSlideReverse { "+"from {"+cssPrefix+"transform:translateX( "+(0-v)+"px ) }"+"to {"+cssPrefix+"transform:translateX( "+(m?0-l:0)+"px ) }"+"}";w[0].innerHTML=g;var y=(m?l-v:v)*.2/parseFloat(t.speed);o[0].style[h]="hoverForMoreSlideReverse "+(y>1?1:y)+"s linear";o.removeClass("scrolling");setTimeout(function(){if(o.is(".scrolling"))return;o.children(".hoverForMoreContent").remove();o.css("overflow",u);o.parent().css("overflow",a);if(i&&t.addStyles)e("body").css(cssPrefix+"user-select","text")},y*1e3- -50)}else{o[0].style[h]="";o.css("overflow",u).find(".hoverForMoreContent").remove();o.parent().css("overflow",a);if(i&&t.addStyles)e("body").css(cssPrefix+"user-select","text")}}else{var c=((new Date).getTime()-f)/1e3;var b=o[0].style[p].match(/transform (.*)s/);var y=b&&b[1]&&parseFloat(b[1])<c?parseFloat(b[1]):c;y*=.5;if(!t.snapback)o[0].style[p]="";else o[0].style[p]=cssPrefix+"transform "+y+"s linear";o.removeClass("scrolling");if(!r)o[0].style[d]="translateX(0px)";else setTimeout(function(){o[0].style[d]="translateX(0px)"},0);if(!t.snapback){o.css("overflow",u);if(i&&t.addStyles)e("body").css(cssPrefix+"user-select","text")}else{setTimeout(function(){if(o.is(".scrolling"))return;o.css("overflow",u);if(i&&t.addStyles)e("body").css(cssPrefix+"user-select","text")},y*1e3)}}});n.refresh=function(){e(n.selector).each(function(n,r){e(r).not(".scrolling").trigger(t.startEvent)})};if(t.alwaysOn)n.refresh();return n}})(window.jQuery||$)